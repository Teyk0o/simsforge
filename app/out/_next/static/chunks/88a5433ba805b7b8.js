(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";let t;var r=e.i(43476),a=e.i(71645),n=e.i(18566),s=e.i(45723),i=e.i(32341),o=e.i(53252);let l="u">typeof window?a.useLayoutEffect:a.useEffect;function c(e){if(void 0!==e)switch(typeof e){case"number":return e;case"string":if(e.endsWith("px"))return parseFloat(e)}}let d=null;function u({containerElement:e,direction:t,isRtl:r,scrollOffset:a}){if("horizontal"===t&&r)switch(function(e=!1){if(null===d||e){let e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";let r=document.createElement("div"),a=r.style;return a.width="100px",a.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?d="positive-descending":(e.scrollLeft=1,d=0===e.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(e),d}return d}()){case"negative":return-a;case"positive-descending":if(e){let{clientWidth:t,scrollLeft:r,scrollWidth:a}=e;return a-t-r}}return a}function m(e,t="Assertion error"){if(!e)throw console.error(t),Error(t)}function h(e,t){if(e===t)return!0;if(!!e!=!!t||(m(void 0!==e),m(void 0!==t),Object.keys(e).length!==Object.keys(t).length))return!1;for(let r in e)if(!Object.is(t[r],e[r]))return!1;return!0}function g({cachedBounds:e,itemCount:t,itemSize:r}){if(0===t)return 0;if("number"==typeof r)return t*r;{let r=e.get(0===e.size?0:e.size-1);return m(void 0!==r,"Unexpected bounds cache miss"),t*((r.scrollOffset+r.size)/e.size)}}function f({cachedBounds:e,containerScrollOffset:t,containerSize:r,itemCount:a,overscanCount:n}){let s=a-1,i=0,o=-1,l=0,c=-1,d=0;for(;d<s;){let r=e.get(d);if(r.scrollOffset+r.size>t)break;d++}for(l=Math.max(0,(i=d)-n);d<s;){let a=e.get(d);if(a.scrollOffset+a.size>=t+r)break;d++}return c=Math.min(a-1,(o=Math.min(s,d))+n),i<0&&(i=0,o=-1,l=0,c=-1),{startIndexVisible:i,stopIndexVisible:o,startIndexOverscan:l,stopIndexOverscan:c}}function p(e,t){let{ariaAttributes:r,style:a,...n}=e,{ariaAttributes:s,style:i,...o}=t;return h(r,s)&&h(a,i)&&h(n,o)}function x({children:e,className:t,defaultHeight:n=0,listRef:s,onResize:i,onRowsRendered:o,overscanCount:d=3,rowComponent:x,rowCount:v,rowHeight:b,rowProps:y,tagName:w="div",style:C,...j}){let _=(0,a.useMemo)(()=>y,Object.values(y)),E=(0,a.useMemo)(()=>(0,a.memo)(x,p),[x]),[S,H]=(0,a.useState)(null),z=null!=b&&"object"==typeof b&&"getAverageRowHeight"in b&&"function"==typeof b.getAverageRowHeight,{getCellBounds:M,getEstimatedSize:N,scrollToIndex:A,startIndexOverscan:k,startIndexVisible:V,stopIndexOverscan:Z,stopIndexVisible:T}=function({containerElement:e,containerStyle:t,defaultContainerSize:r=0,direction:n,isRtl:s=!1,itemCount:i,itemProps:o,itemSize:d,onResize:p,overscanCount:x}){var v;let b,{height:y=r,width:w=r}=function({box:e,defaultHeight:t,defaultWidth:r,disabled:n,element:s,mode:i,style:o}){let{styleHeight:d,styleWidth:u}=(0,a.useMemo)(()=>({styleHeight:c(o?.height),styleWidth:c(o?.width)}),[o?.height,o?.width]),[m,h]=(0,a.useState)({height:t,width:r}),g=n||"only-height"===i&&void 0!==d||"only-width"===i&&void 0!==u||void 0!==d&&void 0!==u;return l(()=>{if(null===s||g)return;let t=new ResizeObserver(e=>{for(let t of e){let{contentRect:e,target:r}=t;s===r&&h(t=>t.height===e.height&&t.width===e.width?t:{height:e.height,width:e.width})}});return t.observe(s,{box:e}),()=>{t?.unobserve(s)}},[e,g,s,d,u]),(0,a.useMemo)(()=>({height:d??m.height,width:u??m.width}),[m,d,u])}({defaultHeight:"vertical"===n?r:void 0,defaultWidth:"horizontal"===n?r:void 0,element:e,mode:"vertical"===n?"only-height":"only-width",style:t}),C=(0,a.useRef)({height:0,width:0}),j="vertical"===n?y:w,_=function({containerSize:e,itemSize:t}){let r;return"string"==typeof t?(m(t.endsWith("%"),`Invalid item size: "${t}"; string values must be percentages (e.g. "100%")`),m(void 0!==e,"Container size must be defined if a percentage item size is specified"),r=e*parseInt(t)/100):r=t,r}({containerSize:j,itemSize:d});(0,a.useLayoutEffect)(()=>{if("function"==typeof p){let e=C.current;(e.height!==y||e.width!==w)&&(p({height:y,width:w},{...e}),e.height=y,e.width=w)}},[y,p,w]);let E=function({itemCount:e,itemProps:t,itemSize:r}){return(0,a.useMemo)(()=>(function({itemCount:e,itemProps:t,itemSize:r}){let a=new Map;return{get(n){for(m(n<e,`Invalid index ${n}`);a.size-1<n;){let e,s=a.size;switch(typeof r){case"function":e=r(s,t);break;case"number":e=r}if(0===s)a.set(s,{size:e,scrollOffset:0});else{let t=a.get(s-1);m(void 0!==t,`Unexpected bounds cache miss for index ${n}`),a.set(s,{scrollOffset:t.scrollOffset+t.size,size:e})}}let s=a.get(n);return m(void 0!==s,`Unexpected bounds cache miss for index ${n}`),s},set(e,t){a.set(e,t)},get size(){return a.size}}})({itemCount:e,itemProps:t,itemSize:r}),[e,t,r])}({itemCount:i,itemProps:o,itemSize:_}),S=(0,a.useCallback)(e=>E.get(e),[E]),[H,z]=(0,a.useState)(()=>f({cachedBounds:E,containerScrollOffset:0,containerSize:j,itemCount:i,overscanCount:x})),{startIndexVisible:M,startIndexOverscan:N,stopIndexVisible:A,stopIndexOverscan:k}={startIndexVisible:Math.min(i-1,H.startIndexVisible),startIndexOverscan:Math.min(i-1,H.startIndexOverscan),stopIndexVisible:Math.min(i-1,H.stopIndexVisible),stopIndexOverscan:Math.min(i-1,H.stopIndexOverscan)},V=(0,a.useCallback)(()=>g({cachedBounds:E,itemCount:i,itemSize:_}),[E,i,_]),Z=(0,a.useCallback)(t=>f({cachedBounds:E,containerScrollOffset:u({containerElement:e,direction:n,isRtl:s,scrollOffset:t}),containerSize:j,itemCount:i,overscanCount:x}),[E,e,j,n,s,i,x]);return l(()=>{z(Z(("vertical"===n?e?.scrollTop:e?.scrollLeft)??0))},[e,n,Z]),l(()=>{if(!e)return;let t=()=>{z(t=>{let{scrollLeft:r,scrollTop:a}=e,o=f({cachedBounds:E,containerScrollOffset:u({containerElement:e,direction:n,isRtl:s,scrollOffset:"vertical"===n?a:r}),containerSize:j,itemCount:i,overscanCount:x});return h(o,t)?t:o})};return e.addEventListener("scroll",t),()=>{e.removeEventListener("scroll",t)}},[E,e,j,n,i,x]),{getCellBounds:S,getEstimatedSize:V,scrollToIndex:(v=({align:t="auto",containerScrollOffset:r,index:a})=>{let o=function({align:e,cachedBounds:t,index:r,itemCount:a,itemSize:n,containerScrollOffset:s,containerSize:i}){if(r<0||r>=a)throw RangeError(`Invalid index specified: ${r}`,{cause:`Index ${r} is not within the range of 0 - ${a-1}`});let o=g({cachedBounds:t,itemCount:a,itemSize:n}),l=t.get(r),c=Math.max(0,Math.min(o-i,l.scrollOffset)),d=Math.max(0,l.scrollOffset-i+l.size);switch("smart"===e&&(e=s>=d&&s<=c?"auto":"center"),e){case"start":return c;case"end":return d;case"center":return l.scrollOffset<=i/2?0:l.scrollOffset+l.size/2>=o-i/2?o-i:l.scrollOffset+l.size/2-i/2;default:return s>=d&&s<=c?s:s<d?d:c}}({align:t,cachedBounds:E,containerScrollOffset:r,containerSize:j,index:a,itemCount:i,itemSize:_});if(e){if(o=u({containerElement:e,direction:n,isRtl:s,scrollOffset:o}),"function"!=typeof e.scrollTo){let e=Z(o);h(H,e)||z(e)}return o}},b=(0,a.useRef)(()=>{throw Error("Cannot call during render.")}),l(()=>{b.current=v},[v]),(0,a.useCallback)(e=>b.current?.(e),[b])),startIndexOverscan:N,startIndexVisible:M,stopIndexOverscan:k,stopIndexVisible:A}}({containerElement:S,containerStyle:C,defaultContainerSize:n,direction:"vertical",itemCount:v,itemProps:_,itemSize:(0,a.useMemo)(()=>z?e=>b.getRowHeight(e)??b.getAverageRowHeight():b,[z,b]),onResize:i,overscanCount:d});(0,a.useImperativeHandle)(s,()=>({get element(){return S},scrollToRow({align:e="auto",behavior:t="auto",index:r}){let a=A({align:e,containerScrollOffset:S?.scrollTop??0,index:r});"function"==typeof S?.scrollTo&&S.scrollTo({behavior:t,top:a})}}),[S,A]),l(()=>{if(!S)return;let e=Array.from(S.children).filter((e,t)=>{if(e.hasAttribute("aria-hidden"))return!1;let r=`${k+t}`;return e.setAttribute("data-react-window-index",r),!0});if(z)return b.observeRowElements(e)},[S,z,b,k,Z]),(0,a.useEffect)(()=>{k>=0&&Z>=0&&o&&o({startIndex:V,stopIndex:T},{startIndex:k,stopIndex:Z})},[o,k,V,Z,T]);let R=(0,a.useMemo)(()=>{let e=[];if(v>0)for(let t=k;t<=Z;t++){let r=M(t);e.push((0,a.createElement)(E,{..._,ariaAttributes:{"aria-posinset":t+1,"aria-setsize":v,role:"listitem"},key:t,index:t,style:{position:"absolute",left:0,transform:`translateY(${r.scrollOffset}px)`,height:z?void 0:r.size,width:"100%"}}))}return e},[E,M,z,v,_,k,Z]),I=(0,r.jsx)("div",{"aria-hidden":!0,style:{height:N(),width:"100%",zIndex:-1}});return(0,a.createElement)(w,{role:"list",...j,className:t,ref:H,style:{position:"relative",maxHeight:"100%",flexGrow:1,overflowY:"auto",...C}},R,e,I)}a.useState,a.useRef,a.useState,a.useRef,t="u">typeof window?window:"u">typeof self?self:e.g;let v=null,b=null,y=t.clearTimeout,w=t.setTimeout,C=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame,j=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame;function _({box:e="content-box",className:r,"data-testid":n,id:s,nonce:i,onResize:o,style:l,tagName:c="div",...d}){let u,m;"Child"in d?u=d.Child:"ChildComponent"in d?u=d.ChildComponent:"renderProp"in d&&(m=d.renderProp);let[h,g]=(0,a.useState)(null),[f,p]=(0,a.useState)(),[x,y]=(0,a.useState)();!function({box:e,nonce:r,onResize:n,rootElement:s}){let i=(0,a.useRef)({onResize:n,parentNode:null,prevSize:{height:void 0,width:void 0}});(0,a.useLayoutEffect)(()=>{i.current.onResize=n});let o=(0,a.useRef)(()=>{let t,r,{onResize:a,parentNode:n,prevSize:s}=i.current;if(null!==n){switch(e){case"border-box":{let e=n.getBoundingClientRect();t=e.height,r=e.width;break}case"content-box":{let e=n.getBoundingClientRect(),a=window.getComputedStyle(n)||{},s=parseFloat(a.borderBottomWidth||"0"),i=parseFloat(a.borderLeftWidth||"0"),o=parseFloat(a.borderRightWidth||"0"),l=parseFloat(a.borderTopWidth||"0"),c=parseFloat(a.paddingLeft||"0"),d=parseFloat(a.paddingRight||"0"),u=parseFloat(a.paddingTop||"0"),m=parseFloat(a.paddingBottom||"0");t=e.height-u-m-l-s,r=e.width-c-d-i-o;break}case"device-pixel-content-box":t=n.offsetHeight,r=n.offsetWidth}(s.height!==t||s.width!==r)&&(i.current.prevSize={height:t,width:r},a({height:t,width:r}))}});(0,a.useLayoutEffect)(()=>{if(null===s)return;let e=s.parentNode;if(null===e||null===e.ownerDocument||null===e.ownerDocument.defaultView||!(e instanceof e.ownerDocument.defaultView.HTMLElement))return;i.current.parentNode=e;let a=o.current,n=e.ownerDocument.defaultView.ResizeObserver;if(null!=n){let t,r=new n(()=>{t=setTimeout(a,0)});return r.observe(e),()=>{t&&clearTimeout(t),r.disconnect()}}{let n=function(e){let r,a,n,s,i,o,l="u">typeof document&&document.attachEvent;if(!l){i=function(e){let t=e.__resizeTriggers__,r=t.firstElementChild,a=t.lastElementChild,n=r.firstElementChild;a.scrollLeft=a.scrollWidth,a.scrollTop=a.scrollHeight,n.style.width=r.offsetWidth+1+"px",n.style.height=r.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight},o=function(e){if(e.target.className&&"function"==typeof e.target.className.indexOf&&0>e.target.className.indexOf("contract-trigger")&&0>e.target.className.indexOf("expand-trigger"))return;let t=this;i(this),this.__resizeRAF__&&v(this.__resizeRAF__),this.__resizeRAF__=b(function(){var r;((r=t).offsetWidth!==r.__resizeLast__.width||r.offsetHeight!==r.__resizeLast__.height)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach(function(r){r.call(t,e)}))})};let e=!1,t="";n="animationstart";let l="Webkit Moz O ms".split(" "),c="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" ");{let r=document.createElement("fakeelement");if(void 0!==r.style.animationName&&(e=!0),!1===e){for(let a=0;a<l.length;a++)if(void 0!==r.style[l[a]+"AnimationName"]){t="-"+l[a].toLowerCase()+"-",n=c[a],e=!0;break}}}r="@"+t+"keyframes "+(a="resizeanim")+" { from { opacity: 0; } to { opacity: 0; } } ",s=t+"animation: 1ms "+a+"; "}let c=function(t){if(!t.getElementById("detectElementResize")){let a=(r||"")+".resize-triggers { "+(s||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',n=t.head||t.getElementsByTagName("head")[0],i=t.createElement("style");i.id="detectElementResize",i.type="text/css",null!=e&&i.setAttribute("nonce",e),i.styleSheet?i.styleSheet.cssText=a:i.appendChild(t.createTextNode(a)),n.appendChild(i)}};return{addResizeListener:function(e,r){if(l)e.attachEvent("onresize",r);else{if(!e.__resizeTriggers__){let r=e.ownerDocument,s=t.getComputedStyle(e);s&&"static"===s.position&&(e.style.position="relative"),c(r),e.__resizeLast__={},e.__resizeListeners__=[],(e.__resizeTriggers__=r.createElement("div")).className="resize-triggers";let l=r.createElement("div");l.className="expand-trigger",l.appendChild(r.createElement("div"));let d=r.createElement("div");d.className="contract-trigger",e.__resizeTriggers__.appendChild(l),e.__resizeTriggers__.appendChild(d),e.appendChild(e.__resizeTriggers__),i(e),e.addEventListener("scroll",o,!0),n&&(e.__resizeTriggers__.__animationListener__=function(t){t.animationName===a&&i(e)},e.__resizeTriggers__.addEventListener(n,e.__resizeTriggers__.__animationListener__))}e.__resizeListeners__.push(r)}},removeResizeListener:function(e,t){if(l)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",o,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(n,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch{}}}}}(r);return n.addResizeListener(e,a),()=>{n.removeResizeListener(e,a)}}},[r,s])}({box:e,nonce:i,onResize:e=>{p(e.height),y(e.width),"u">typeof o&&o(e)},rootElement:h});let w=(0,a.useMemo)(()=>u?(0,a.memo)(u):void 0,[u]);return(0,a.createElement)(c,{className:r,"data-auto-sizer":"","data-testid":n,id:s,ref:g,style:l},w?(0,a.createElement)(w,{height:f,width:x}):void 0,m?m({height:f,width:x}):void 0)}null==C||null==j?(v=y,b=function(e){return w(e,20)}):(v=function([e,t]){C(e),y(t)},b=function(e){let t=j(function(){y(r),e()}),r=w(function(){C(t),e()},20);return[t,r]});var E=e.i(57688),S=e.i(22016),H=e.i(83792),z=e.i(1753),M=e.i(8776),N=e.i(79241),A=e.i(19132);function k({mod:e}){let t=e.authors.map(e=>e.name).join(", "),n=e.categories.slice(0,2),{showToast:i,updateToast:o}=(0,M.useToast)(),{refreshProfiles:l}=(0,N.useProfiles)(),[c,d]=(0,a.useState)(!1),u=async t=>{if(t.preventDefault(),t.stopPropagation(),!c)try{let t;d(!0);let r=async(e,t="simsforge-settings")=>{try{let r=new TextEncoder().encode(t),a=await crypto.subtle.digest("SHA-256",r),n=await crypto.subtle.importKey("raw",a,"AES-GCM",!1,["decrypt"]),s=atob(e),i=new Uint8Array(s.length);for(let e=0;e<s.length;e++)i[e]=s.charCodeAt(e);let o=i.slice(0,12),l=i.slice(12),c=await crypto.subtle.decrypt({name:"AES-GCM",iv:o},n,l);return new TextDecoder().decode(c)}catch(e){return console.error("Decryption failed:",e),null}},a=(t="simsforge_mods_path",localStorage.getItem(t));if(!a){i({type:"error",title:"Mods path not configured",message:"Please configure your mods folder in Settings",duration:5e3}),d(!1);return}let n=await r(a);if(!n){i({type:"error",title:"Failed to read mods path",message:"Please reconfigure your mods folder in Settings",duration:5e3}),d(!1);return}let s=i({type:"download",title:`Installing ${e.name}`,message:"Starting download...",progress:0,duration:0}),c=await A.modInstallationService.installMod(e.id,n,t=>{o(s,{title:`Installing ${e.name}`,message:t.message,progress:t.percent})});c.success?(o(s,{type:"success",title:"Installation complete!",message:`${c.modName} has been installed successfully`,duration:3e3}),await l()):o(s,{type:"error",title:"Installation failed",message:c.error||"Unknown error",duration:3e3})}catch(e){i({type:"error",title:"Installation failed",message:e.message||"An unexpected error occurred",duration:5e3})}finally{d(!1)}};return(0,r.jsx)("div",{className:"group rounded-lg px-4 py-3 transition-all duration-200",style:{backgroundColor:"var(--ui-panel)",border:"1px solid var(--ui-border)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="var(--ui-hover)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="var(--ui-panel)",children:(0,r.jsx)(S.default,{href:`/mods/${e.id}`,children:(0,r.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,r.jsx)("div",{className:"col-span-6 lg:col-span-5",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"relative h-14 w-14 rounded-md overflow-hidden flex-shrink-0",style:{backgroundColor:"var(--ui-dark)"},children:e.logo?(0,r.jsx)(E.default,{src:e.logo,alt:e.name,fill:!0,className:"object-cover",unoptimized:!0}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xl",style:{color:"var(--text-tertiary)"},children:"ðŸ“¦"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold truncate",style:{color:"var(--text-primary)"},children:e.name}),(0,r.jsxs)("p",{className:"text-xs truncate",style:{color:"var(--text-secondary)"},children:["by ",t||"Unknown"]})]})]})}),(0,r.jsx)("div",{className:"col-span-3 lg:col-span-3 hidden md:block",children:(0,r.jsxs)("div",{className:"flex gap-1 items-center max-w-full overflow-hidden whitespace-nowrap",children:[n.map((e,t)=>(0,r.jsx)("span",{className:"text-xs px-2 py-1 rounded truncate flex-shrink-0",style:{backgroundColor:"var(--ui-hover)",color:"var(--text-secondary)"},title:e,children:e},t)),e.categories.length>2&&(0,r.jsxs)("span",{className:"text-xs flex-shrink-0",style:{color:"var(--text-tertiary)"},children:["+",e.categories.length-2]})]})}),(0,r.jsx)("div",{className:"col-span-2 hidden lg:block lg:col-span-1",children:(0,r.jsx)("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:(0,H.formatDownloadCount)(e.downloadCount)})}),(0,r.jsx)("div",{className:"col-span-3 lg:col-span-2 hidden lg:block text-right",children:(0,r.jsx)("span",{className:"text-xs",style:{color:"var(--text-secondary)"},children:(0,H.formatRelativeDate)(e.dateModified)})}),(0,r.jsx)("div",{className:"col-span-6 md:col-span-3 lg:col-span-1 flex justify-end",children:(0,r.jsx)("button",{onClick:u,disabled:c,className:"px-3 py-1.5 bg-brand-green hover:bg-brand-dark text-white font-medium rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",title:c?"Installing...":"Install",children:c?(0,r.jsx)(s.Spinner,{size:24,className:"animate-spin"}):(0,r.jsx)(z.DownloadSimple,{size:24})})})]})})})}function V({mod:e}){let t=e.authors.map(e=>e.name).join(", "),n=e.categories.slice(0,2),{showToast:i,updateToast:o}=(0,M.useToast)(),{refreshProfiles:l}=(0,N.useProfiles)(),[c,d]=(0,a.useState)(!1),u=async t=>{if(t.preventDefault(),t.stopPropagation(),!c)try{let t;d(!0);let r=async(e,t="simsforge-settings")=>{try{let r=new TextEncoder().encode(t),a=await crypto.subtle.digest("SHA-256",r),n=await crypto.subtle.importKey("raw",a,"AES-GCM",!1,["decrypt"]),s=atob(e),i=new Uint8Array(s.length);for(let e=0;e<s.length;e++)i[e]=s.charCodeAt(e);let o=i.slice(0,12),l=i.slice(12),c=await crypto.subtle.decrypt({name:"AES-GCM",iv:o},n,l);return new TextDecoder().decode(c)}catch(e){return console.error("Decryption failed:",e),null}},a=(t="simsforge_mods_path",localStorage.getItem(t));if(!a){i({type:"error",title:"Mods path not configured",message:"Please configure your mods folder in Settings",duration:3e3}),d(!1);return}let n=await r(a);if(!n){i({type:"error",title:"Failed to read mods path",message:"Please reconfigure your mods folder in Settings",duration:3e3}),d(!1);return}let s=i({type:"download",title:`Installing ${e.name}`,message:"Starting download...",progress:0,duration:0}),c=await A.modInstallationService.installMod(e.id,n,t=>{o(s,{title:`Installing ${e.name}`,message:t.message,progress:t.percent})});c.success?(o(s,{type:"success",title:"Installation complete!",message:`${c.modName} has been installed successfully`,duration:3e3}),await l()):o(s,{type:"error",title:"Installation failed",message:c.error||"Unknown error",duration:3e3})}catch(e){i({type:"error",title:"Installation failed",message:e.message||"An unexpected error occurred",duration:3e3})}finally{d(!1)}};return(0,r.jsx)(S.default,{href:`/mods/${e.id}`,children:(0,r.jsxs)("div",{className:"group rounded-lg overflow-hidden transition-all duration-200 h-full flex flex-col",style:{backgroundColor:"var(--ui-panel)",border:"1px solid var(--ui-border)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="var(--ui-hover)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="var(--ui-panel)",children:[(0,r.jsxs)("div",{className:"relative aspect-video overflow-hidden",style:{backgroundColor:"#1a1a1a"},children:[e.logo?(0,r.jsx)(E.default,{src:e.logo,alt:e.name,fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-200",unoptimized:!0}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center text-4xl",style:{color:"var(--text-tertiary)"},children:"ðŸ“¦"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors duration-200"})]}),(0,r.jsxs)("div",{className:"p-4 flex-1 flex flex-col gap-3",children:[(0,r.jsxs)("div",{className:"h-14",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold line-clamp-2",style:{color:"var(--text-primary)"},children:e.name}),(0,r.jsxs)("p",{className:"text-xs line-clamp-1",style:{color:"var(--text-secondary)"},children:["by ",t||"Unknown"]})]}),e.summary&&(0,r.jsx)("p",{className:"text-xs line-clamp-2 overflow-hidden min-h-8",style:{color:"var(--text-secondary)"},children:e.summary}),n.length>0&&(0,r.jsx)("div",{className:"flex gap-1 flex-wrap overflow-hidden h-7",children:n.map((e,t)=>(0,r.jsx)("span",{className:"text-xs px-2 py-1 rounded truncate flex-shrink-0",style:{backgroundColor:"var(--ui-hover)",color:"var(--text-secondary)"},title:e,children:e},t))}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs",style:{color:"var(--text-secondary)"},children:[(0,r.jsx)("span",{children:(0,H.formatDownloadCount)(e.downloadCount)}),(0,r.jsx)("span",{children:"â€¢"}),(0,r.jsx)("span",{children:(0,H.formatRelativeDate)(e.dateModified)})]}),(0,r.jsx)("button",{onClick:u,disabled:c,className:"w-full px-3 py-2.5 bg-brand-green hover:bg-brand-dark text-white font-medium rounded text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer flex items-center justify-center gap-2",title:c?"Installing...":"Install",children:c?(0,r.jsx)(s.Spinner,{size:18,className:"animate-spin"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.DownloadSimple,{size:18}),(0,r.jsx)("span",{children:"Install"})]})})]})]})})}function Z({mods:e,index:t,columns:a}){return(0,r.jsx)("div",{className:`grid ${{1:"grid-cols-1",2:"grid-cols-2",3:"grid-cols-3",4:"grid-cols-4",5:"grid-cols-5"}[a]||"grid-cols-4"} gap-4 px-4 lg:px-8 py-4 pb-4`,children:e.map(e=>(0,r.jsx)(V,{mod:e},e.id))})}var T=e.i(24883);function R({searchQuery:e,sortBy:t,category:n,viewMode:s}){let{isLoading:o}=(0,i.useAuth)(),[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null),[p,v]=(0,a.useState)({index:0,pageSize:50,resultCount:0,totalCount:0}),[b,y]=(0,a.useState)(!0),[w,C]=(0,a.useState)(4);(0,a.useRef)(null);let j=(0,a.useRef)(p);(0,a.useRef)(null),(0,a.useEffect)(()=>{let e=()=>{let e=window.innerWidth;e<640?C(1):e<1024?C(2):e<1280?C(3):e<1536?C(4):C(5)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{j.current=p},[p]);let E=(0,a.useMemo)(()=>{let e=[];for(let t=0;t<l.length;t+=w)e.push(l.slice(t,t+w));return e},[l,w]),H=(0,a.useCallback)(async r=>{0===r?u(!0):h(!0);let a={query:e||void 0,pageSize:50,pageIndex:r,sortBy:(()=>{switch(t){case"relevance":return"relevance";case"trending":return"popularity";case"date":return"date";default:return"downloads"}})(),categoryName:n||void 0};try{let e=await (0,T.searchCurseForgeMods)(a);c(t=>0===r?e.mods:[...t,...e.mods]),v({index:r,pageSize:50,resultCount:e.pagination.resultCount,totalCount:e.pagination.totalCount});let t=(r+1)*50;y(t<e.pagination.totalCount)}catch(e){e.response?.data?.error?.code==="API_KEY_REQUIRED"?f("api_key_required"):f(e.response?.data?.error?.message||"Failed to load mods"),0===r&&c([])}finally{0===r?u(!1):h(!1)}},[e,t,n]);(0,a.useEffect)(()=>{o||(c([]),v({index:0,pageSize:50,resultCount:0,totalCount:0}),f(null),y(!0),H(0))},[e,t,n,o,H]);let z=(0,a.useCallback)((e,t)=>{let r="grid"===s?E.length:l.length,{stopIndex:a}=e;a>=r-10&&b&&!m&&H(j.current.index+1).catch(e=>{f("Failed to load more mods")})},[b,m,H,l.length,s,E.length]),M=(0,a.useCallback)(({index:e,style:t})=>{let a=l[e];return a?(0,r.jsx)("div",{style:t,className:"px-4 lg:px-8 flex items-center",children:(0,r.jsx)("div",{className:"w-full mb-4",children:(0,r.jsx)(k,{mod:a})})}):(0,r.jsx)("div",{style:t})},[l]),N=(0,a.useCallback)(({index:e,style:t})=>{let a=E[e];return a&&0!==a.length?(0,r.jsx)("div",{style:t,children:(0,r.jsx)(Z,{mods:a,index:e,columns:w})}):(0,r.jsx)("div",{style:t})},[E,w]);return d?(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-8 h-8 border-4 border-gray-700 border-t-green-600 rounded-full animate-spin"})}):"api_key_required"===g?(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center p-8",children:(0,r.jsxs)("div",{className:"text-center max-w-md rounded-lg p-8 border",style:{backgroundColor:"var(--ui-panel)",borderColor:"var(--ui-border)"},children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"ðŸ”‘"}),(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2",style:{color:"var(--text-primary)"},children:"CurseForge API Key Required"}),(0,r.jsx)("p",{className:"text-gray-400 mb-6",style:{color:"var(--text-secondary)"},children:"To browse CurseForge mods, please configure your API key in Settings."}),(0,r.jsx)(S.default,{href:"/settings",className:"inline-block bg-green-600 hover:bg-green-700 px-6 py-2 rounded font-medium text-white transition",children:"Go to Settings"})]})}):g?(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center p-8",children:(0,r.jsxs)("div",{className:"text-center max-w-md rounded-lg p-8 border",style:{backgroundColor:"var(--ui-panel)",borderColor:"var(--ui-border)"},children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Error"}),(0,r.jsx)("p",{className:"text-red-200 mb-4",style:{color:"var(--text-secondary)"},children:g}),(0,r.jsx)("button",{onClick:()=>H(0),className:"bg-red-600 hover:bg-red-700 px-4 py-2 rounded font-medium text-white transition",children:"Try Again"})]})}):(0,r.jsxs)("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:["list"===s&&(0,r.jsxs)("div",{className:"flex-shrink-0 grid grid-cols-12 gap-4 px-4 lg:px-8 py-3 text-xs font-semibold text-gray-400 uppercase tracking-wider bg-gray-50 border-b",style:{backgroundColor:"var(--ui-dark)",color:"var(--text-secondary)",borderColor:"var(--ui-border)"},children:[(0,r.jsx)("div",{className:"col-span-6 lg:col-span-5",children:"Mod"}),(0,r.jsx)("div",{className:"col-span-3 lg:col-span-2 hidden md:block",children:"CatÃ©gories"}),(0,r.jsx)("div",{className:"col-span-2 hidden lg:block",children:"TÃ©lÃ©chargements"}),(0,r.jsx)("div",{className:"col-span-3 lg:col-span-2 hidden lg:block text-right",children:"DerniÃ¨re MAJ"}),(0,r.jsx)("div",{className:"col-span-6 md:col-span-3 lg:col-span-1 text-right"})]}),l.length>0?"list"===s?(0,r.jsx)("div",{className:"flex-1 flex flex-col min-w-0",children:(0,r.jsx)(_,{children:({height:e,width:t})=>(0,r.jsx)(x,{height:e,itemCount:l.length,itemSize:96,width:t,onItemsRendered:z,style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:M})})}):(0,r.jsx)("div",{className:"flex-1 flex flex-col min-w-0",children:(0,r.jsx)(_,{children:({height:e,width:t})=>(0,r.jsx)(x,{height:e,itemCount:E.length,itemSize:400,width:t,onItemsRendered:z,style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:N})})}):(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-center py-12 text-gray-500",children:(0,r.jsx)("p",{children:"Aucun mod trouvÃ© correspondant Ã  votre recherche."})})})]})}var I=e.i(15330),L=e.i(69464);let F=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212Zm-12-80V80a12,12,0,0,1,24,0v52a12,12,0,0,1-24,0Zm28,40a16,16,0,1,1-16-16A16,16,0,0,1,144,172Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),a.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm-8-80V80a8,8,0,0,1,16,0v56a8,8,0,0,1-16,0Zm20,36a12,12,0,1,1-12-12A12,12,0,0,1,140,172Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm-8,56a8,8,0,0,1,16,0v56a8,8,0,0,1-16,0Zm8,104a12,12,0,1,1,12-12A12,12,0,0,1,128,184Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm-6-82V80a6,6,0,0,1,12,0v56a6,6,0,0,1-12,0Zm16,36a10,10,0,1,1-10-10A10,10,0,0,1,138,172Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm-8-80V80a8,8,0,0,1,16,0v56a8,8,0,0,1-16,0Zm20,36a12,12,0,1,1-12-12A12,12,0,0,1,140,172Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm-4-84V80a4,4,0,0,1,8,0v56a4,4,0,0,1-8,0Zm12,36a8,8,0,1,1-8-8A8,8,0,0,1,136,172Z"}))]]),O=a.forwardRef((e,t)=>a.createElement(L.default,{ref:t,...e,weights:F}));O.displayName="WarningCircleIcon";let B=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,76H180V56A52,52,0,0,0,76,56V76H48A20,20,0,0,0,28,96V208a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V96A20,20,0,0,0,208,76ZM100,56a28,28,0,0,1,56,0V76H100ZM204,204H52V100H204Zm-76-92a32,32,0,0,0-12,61.66V180a12,12,0,0,0,24,0v-6.34A32,32,0,0,0,128,112Zm0,24a8,8,0,1,1-8,8A8,8,0,0,1,128,136Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,88H48a8,8,0,0,0-8,8V208a8,8,0,0,0,8,8H208a8,8,0,0,0,8-8V96A8,8,0,0,0,208,88Zm-80,72a20,20,0,1,1,20-20A20,20,0,0,1,128,160Z",opacity:"0.2"}),a.createElement("path",{d:"M208,80H176V56a48,48,0,0,0-96,0V80H48A16,16,0,0,0,32,96V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V96A16,16,0,0,0,208,80ZM96,56a32,32,0,0,1,64,0V80H96ZM208,208H48V96H208V208Zm-80-96a28,28,0,0,0-8,54.83V184a8,8,0,0,0,16,0V166.83A28,28,0,0,0,128,112Zm0,40a12,12,0,1,1,12-12A12,12,0,0,1,128,152Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,80H176V56a48,48,0,0,0-96,0V80H48A16,16,0,0,0,32,96V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V96A16,16,0,0,0,208,80Zm-72,78.63V184a8,8,0,0,1-16,0V158.63a24,24,0,1,1,16,0ZM160,80H96V56a32,32,0,0,1,64,0Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,82H174V56a46,46,0,0,0-92,0V82H48A14,14,0,0,0,34,96V208a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V96A14,14,0,0,0,208,82ZM94,56a34,34,0,0,1,68,0V82H94ZM210,208a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V96a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2Zm-82-94a26,26,0,0,0-6,51.29V184a6,6,0,0,0,12,0V165.29A26,26,0,0,0,128,114Zm0,40a14,14,0,1,1,14-14A14,14,0,0,1,128,154Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,112a28,28,0,0,0-8,54.83V184a8,8,0,0,0,16,0V166.83A28,28,0,0,0,128,112Zm0,40a12,12,0,1,1,12-12A12,12,0,0,1,128,152Zm80-72H176V56a48,48,0,0,0-96,0V80H48A16,16,0,0,0,32,96V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V96A16,16,0,0,0,208,80ZM96,56a32,32,0,0,1,64,0V80H96ZM208,208H48V96H208V208Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,84H172V56a44,44,0,0,0-88,0V84H48A12,12,0,0,0,36,96V208a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V96A12,12,0,0,0,208,84ZM92,56a36,36,0,0,1,72,0V84H92ZM212,208a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V96a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4Zm-84-92a24,24,0,0,0-4,47.66V184a4,4,0,0,0,8,0V163.66A24,24,0,0,0,128,116Zm0,40a16,16,0,1,1,16-16A16,16,0,0,1,128,156Z"}))]]),P=a.forwardRef((e,t)=>a.createElement(L.default,{ref:t,...e,weights:B}));P.displayName="LockKeyIcon";let W=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M228,128a12,12,0,0,1-12,12H40a12,12,0,0,1,0-24H216A12,12,0,0,1,228,128ZM40,76H216a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24ZM216,180H40a12,12,0,0,0,0,24H216a12,12,0,0,0,0-24Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M216,64V192H40V64Z",opacity:"0.2"}),a.createElement("path",{d:"M224,128a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16H216A8,8,0,0,1,224,128ZM40,72H216a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16ZM216,184H40a8,8,0,0,0,0,16H216a8,8,0,0,0,0-16Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM192,184H64a8,8,0,0,1,0-16H192a8,8,0,0,1,0,16Zm0-48H64a8,8,0,0,1,0-16H192a8,8,0,0,1,0,16Zm0-48H64a8,8,0,0,1,0-16H192a8,8,0,0,1,0,16Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M222,128a6,6,0,0,1-6,6H40a6,6,0,0,1,0-12H216A6,6,0,0,1,222,128ZM40,70H216a6,6,0,0,0,0-12H40a6,6,0,0,0,0,12ZM216,186H40a6,6,0,0,0,0,12H216a6,6,0,0,0,0-12Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M224,128a8,8,0,0,1-8,8H40a8,8,0,0,1,0-16H216A8,8,0,0,1,224,128ZM40,72H216a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16ZM216,184H40a8,8,0,0,0,0,16H216a8,8,0,0,0,0-16Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M220,128a4,4,0,0,1-4,4H40a4,4,0,0,1,0-8H216A4,4,0,0,1,220,128ZM40,68H216a4,4,0,0,0,0-8H40a4,4,0,0,0,0,8ZM216,188H40a4,4,0,0,0,0,8H216a4,4,0,0,0,0-8Z"}))]]),D=a.forwardRef((e,t)=>a.createElement(L.default,{ref:t,...e,weights:W}));D.displayName="ListIcon";let $=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M200,36H56A20,20,0,0,0,36,56V200a20,20,0,0,0,20,20H200a20,20,0,0,0,20-20V56A20,20,0,0,0,200,36Zm-4,80H140V60h56ZM116,60v56H60V60ZM60,140h56v56H60Zm80,56V140h56v56Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,56V200a8,8,0,0,1-8,8H56a8,8,0,0,1-8-8V56a8,8,0,0,1,8-8H200A8,8,0,0,1,208,56Z",opacity:"0.2"}),a.createElement("path",{d:"M200,40H56A16,16,0,0,0,40,56V200a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V56A16,16,0,0,0,200,40Zm0,80H136V56h64ZM120,56v64H56V56ZM56,136h64v64H56Zm144,64H136V136h64v64Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M216,56v60a4,4,0,0,1-4,4H136V44a4,4,0,0,1,4-4h60A16,16,0,0,1,216,56ZM116,40H56A16,16,0,0,0,40,56v60a4,4,0,0,0,4,4h76V44A4,4,0,0,0,116,40Zm96,96H136v76a4,4,0,0,0,4,4h60a16,16,0,0,0,16-16V140A4,4,0,0,0,212,136ZM40,140v60a16,16,0,0,0,16,16h60a4,4,0,0,0,4-4V136H44A4,4,0,0,0,40,140Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M200,42H56A14,14,0,0,0,42,56V200a14,14,0,0,0,14,14H200a14,14,0,0,0,14-14V56A14,14,0,0,0,200,42Zm2,14v66H134V54h66A2,2,0,0,1,202,56ZM56,54h66v68H54V56A2,2,0,0,1,56,54ZM54,200V134h68v68H56A2,2,0,0,1,54,200Zm146,2H134V134h68v66A2,2,0,0,1,200,202Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M200,40H56A16,16,0,0,0,40,56V200a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V56A16,16,0,0,0,200,40Zm0,80H136V56h64ZM120,56v64H56V56ZM56,136h64v64H56Zm144,64H136V136h64v64Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M200,44H56A12,12,0,0,0,44,56V200a12,12,0,0,0,12,12H200a12,12,0,0,0,12-12V56A12,12,0,0,0,200,44Zm4,12v68H132V52h68A4,4,0,0,1,204,56ZM56,52h68v72H52V56A4,4,0,0,1,56,52ZM52,200V132h72v72H56A4,4,0,0,1,52,200Zm148,4H132V132h72v68A4,4,0,0,1,200,204Z"}))]]),q=a.forwardRef((e,t)=>a.createElement(L.default,{ref:t,...e,weights:$}));function U({viewMode:e,onViewModeChange:t}){return(0,r.jsx)("button",{onClick:()=>{"function"==typeof t&&t("list"===e?"grid":"list")},className:"p-2 text-gray-400 hover:text-brand-green hover:bg-ui-hover rounded transition-colors cursor-pointer",title:"list"===e?"Switch to grid view":"Switch to list view","aria-label":"list"===e?"Switch to grid view":"Switch to list view",children:"list"===e?(0,r.jsx)(q,{size:20,weight:"regular"}):(0,r.jsx)(D,{size:20,weight:"regular"})})}q.displayName="GridFourIcon";let G=[{name:"Sims, Ã¢ges, corps",description:"Tout ce qui touche au Sim lui-mÃªme",subcategories:["Adult","Teen","Toddler","Infant","Child","Elder","Young Adult","Masculine","Feminine","Body","Body Sliders","Body Accessories","Body and Face Presets","Facial / Body Hair","Face Sliders","Skin Details","Skins","Skintones","Eye Color","Hairstyles","Makeup","Likes/Dislikes","Traits","Aspirations","Activities and Skills","Career","Careers","Club","Community","Roommates","Default","Overrides","Bug Fixes","Gameplay","Misc"]},{name:"VÃªtements et style",description:"Tout ce qui est portÃ© par le Sim",subcategories:["Clothing","Shirts","Pants","Skirts","Swimwear","Sleepwear","Underwear and Socks","Shoes","Styled Looks","Head Accessories","Pet Accessories","Jewelry","Occult","Costumes"]},{name:"Construction intÃ©rieure",description:"Tout ce qui est Ã  l'intÃ©rieur de la maison",subcategories:["Rooms","Living Room","Dining Room","Kitchen","Bathroom","Bedroom","Kids Room","Study","Office","Build Mode","Buy Mode","Furniture","Decor","Functional Objects","Comfort","Electronics","Appliances","Entertainment","Floor Tiles","Walls","Wallpapers","Doors","Windows","Stairs","Roof","Roofing","Platform Trim","Lighting","Lighting and Shaders","Storage","House","Household","Households"]},{name:"Construction extÃ©rieure et mondes",description:"Ce qui touche aux terrains, jardins et mondes",subcategories:["Outdoors","Landscaping","Park","Venue","Bar","Shop","Recreation Center","Worlds","World Replacements","Terrain Paints","Water Overlays","Map Replacements","Lots","Foundation"]},{name:"Animaux et crÃ©atures",description:"Tout ce qui concerne les animaux",subcategories:["Pets","Cats","Dogs","Other Pets","Pet Care","Occult Creatures"]},{name:"Langues et culture",description:"Localisation et thÃ¨mes culturels",subcategories:["Translations","French","German","Chinese","Czech","Polish","Portuguese","Russian","Spanish","Thai","Highschool","Entertainment"]},{name:"Fichiers, scÃ©narios et divers",description:"Tout ce qui ne rentre pas ailleurs",subcategories:["Mods","Save Files","Scenarios","Events","Recipes","Poses and Animations","Create a Sim","Other"]}],K=[{value:"relevance",label:"Pertinence"},{value:"trending",label:"Tendances"},{value:"date",label:"RÃ©cents"},{value:"downloads",label:"Populaires"}],Y=[{id:"all",label:"Tout voir"},{id:"updates",label:"Mises Ã  jour",icon:O},{id:"early-access",label:"Early Access",icon:P},{id:"installed",label:"InstallÃ©s"}];function J({onSortChange:e,activeSort:t,onFilterChange:n,activeFilter:s,onCategoryChange:i,selectedCategory:o,viewMode:l,onViewModeChange:c}){let[d,u]=(0,a.useState)(null),[m,h]=(0,a.useState)(G[0]?.name||null),g=(0,a.useRef)(null),f=e=>{"function"==typeof i&&(i(e),u(null))};return(0,a.useEffect)(()=>{let e=e=>{g.current&&!g.current.contains(e.target)&&u(null)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,r.jsxs)("div",{className:"px-8 py-4 flex flex-col md:flex-row md:items-center gap-4 border-b sticky top-0 z-10 backdrop-blur-md",style:{backgroundColor:"var(--ui-panel)",borderColor:"var(--ui-border)"},children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",ref:g,children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>u("category"===d?null:"category"),className:"flex items-center gap-2 px-3 py-1.5 border rounded-lg text-sm font-medium hover:border-brand-green transition-colors cursor-pointer",style:{backgroundColor:"var(--ui-panel)",borderColor:"var(--ui-border)"},children:[(0,r.jsx)("span",{children:"CatÃ©gorie:"}),(0,r.jsx)("span",{className:"text-brand-green",children:o||"Aucune"}),(0,r.jsx)(I.CaretDown,{size:16,className:`transition-transform ${"category"===d?"rotate-180":""}`,style:{color:"var(--text-secondary)"}})]}),"category"===d&&(0,r.jsxs)("div",{className:"absolute left-0 mt-1 border rounded-lg shadow-lg z-20 flex h-96 overflow-hidden",style:{backgroundColor:"var(--ui-panel)",borderColor:"var(--ui-border)"},children:[(0,r.jsxs)("div",{className:"w-80 border-r overflow-y-auto",style:{borderColor:"var(--ui-border)"},children:[(0,r.jsx)("button",{onClick:()=>f(""),className:`w-full text-left px-3 py-2 border-b transition-colors ${""===o?"bg-brand-green/10 text-brand-green font-medium":""}`,style:{borderColor:"var(--ui-border)",backgroundColor:""===o?void 0:"transparent",color:""===o?void 0:"var(--text-primary)",cursor:"pointer"},onMouseEnter:e=>{""!==o&&(e.currentTarget.style.backgroundColor="var(--ui-hover)")},onMouseLeave:e=>{""!==o&&(e.currentTarget.style.backgroundColor="transparent")},children:(0,r.jsx)("div",{className:"text-sm font-medium",children:"Aucune catÃ©gorie"})}),G.map(e=>(0,r.jsxs)("button",{onClick:()=>h(e.name),className:`w-full text-left px-3 py-2 border-b transition-colors ${m===e.name?"font-medium":""}`,style:{borderColor:"var(--ui-border)",backgroundColor:m===e.name?"var(--ui-hover)":"transparent",color:(e.name,"var(--text-primary)"),cursor:"pointer"},onMouseEnter:t=>{m!==e.name&&(t.currentTarget.style.backgroundColor="var(--ui-hover)")},onMouseLeave:t=>{m!==e.name&&(t.currentTarget.style.backgroundColor="transparent")},children:[(0,r.jsx)("div",{className:"text-sm font-medium truncate",children:e.name}),(0,r.jsx)("div",{className:"text-xs truncate",style:{color:"var(--text-tertiary)"},children:e.description})]},e.name))]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-3",children:m&&(0,r.jsx)("div",{className:"space-y-1",children:G.find(e=>e.name===m)?.subcategories.map(e=>(0,r.jsx)("button",{onClick:()=>f(e),className:`block text-left px-3 py-2 text-sm rounded transition-colors whitespace-nowrap ${o===e?"bg-brand-green/10 text-brand-green":""}`,style:{backgroundColor:o===e?void 0:"transparent",color:o===e?void 0:"var(--text-primary)",cursor:"pointer"},onMouseEnter:t=>{o!==e&&(t.currentTarget.style.backgroundColor="var(--ui-hover)")},onMouseLeave:t=>{o!==e&&(t.currentTarget.style.backgroundColor="transparent")},children:e},e))})})]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>u("sort"===d?null:"sort"),className:"flex items-center gap-2 px-3 py-1.5 border rounded-lg text-sm font-medium hover:border-brand-green transition-colors cursor-pointer",style:{backgroundColor:"var(--ui-panel)",borderColor:"var(--ui-border)"},children:[(0,r.jsx)("span",{children:"Trier par:"}),(0,r.jsx)("span",{className:"text-brand-green",children:K.find(e=>e.value===t)?.label}),(0,r.jsx)(I.CaretDown,{size:16,className:`transition-transform ${"sort"===d?"rotate-180":""}`,style:{color:"var(--text-secondary)"}})]}),"sort"===d&&(0,r.jsx)("div",{className:"absolute left-0 mt-1 w-40 border rounded-lg shadow-lg z-20",style:{backgroundColor:"var(--ui-panel)",borderColor:"var(--ui-border)"},children:K.map(({value:a,label:n})=>(0,r.jsx)("button",{onClick:()=>{e(a),u(null)},className:`w-full text-left px-4 py-2 text-sm transition-colors ${t===a?"bg-brand-green/10 text-brand-green":""}`,style:{backgroundColor:t===a?void 0:"transparent",color:t===a?void 0:"var(--text-primary)",cursor:"pointer"},onMouseEnter:e=>{t!==a&&(e.currentTarget.style.backgroundColor="var(--ui-hover)")},onMouseLeave:e=>{t!==a&&(e.currentTarget.style.backgroundColor="transparent")},children:n},a))})]})]}),(0,r.jsx)("div",{className:"w-px h-6 hidden md:block mx-2",style:{backgroundColor:"var(--ui-border)"}}),(0,r.jsx)("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 md:pb-0 scrollbar-hide",children:Y.map(({id:e,label:t,icon:a})=>(0,r.jsxs)("button",{onClick:()=>n(e),className:`filter-chip px-3 py-1.5 rounded-full border text-xs font-bold whitespace-nowrap transition-colors flex items-center gap-1 cursor-pointer ${s===e?"active border-brand-green bg-brand-green/10 text-brand-green":""}`,style:{backgroundColor:s===e?void 0:"var(--ui-panel)",borderColor:s===e?void 0:"var(--ui-border)",color:s===e?void 0:"var(--text-secondary)"},onMouseEnter:t=>{s!==e&&(t.currentTarget.style.backgroundColor="var(--ui-hover)")},onMouseLeave:t=>{s!==e&&(t.currentTarget.style.backgroundColor="var(--ui-panel)")},children:[a&&(0,r.jsx)(a,{size:16}),t]},e))}),(0,r.jsx)("div",{className:"flex-1 hidden md:block"}),(0,r.jsx)(U,{viewMode:l,onViewModeChange:c})]})}function Q(){let{isAuthenticated:e,isLoading:t,continueWithoutAuth:l,isOfflineMode:c}=(0,i.useAuth)(),d=(0,n.useRouter)(),{viewMode:u,toggleViewMode:m}=function(){let[e,t]=(0,a.useState)("list"),[r,n]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=localStorage.getItem("simsforge_view_mode");("grid"===e||"list"===e)&&t(e),n(!0)},[]),{viewMode:e,toggleViewMode:(0,a.useCallback)(e=>{t(e),localStorage.setItem("simsforge_view_mode",e)},[]),isLoaded:r}}(),[h,g]=(0,a.useState)(!1),[f,p]=(0,a.useState)("trending"),[x,v]=(0,a.useState)("all"),[b,y]=(0,a.useState)(""),[w,C]=(0,a.useState)(""),[j,_]=(0,a.useState)("trending");(0,a.useEffect)(()=>{g(!0)},[]);let E=function(e,t=500){let[r,n]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let r=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(r)}},[e,t]),r}(b,500);return((0,a.useEffect)(()=>{b.trim().length>0&&"relevance"!==f?(_(f),p("relevance")):0===b.trim().length&&"relevance"===f&&p(j)},[b,f,j]),h&&t)?(0,r.jsx)("div",{className:"h-screen flex items-center justify-center",style:{background:"linear-gradient(to bottom right, #111827, var(--ui-dark), #111827)"},children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)(s.Spinner,{size:48,className:"animate-spin text-brand-green"}),(0,r.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Chargement..."})]})}):!h||e||c?h?(0,r.jsx)(o.default,{children:(0,r.jsxs)("main",{className:"flex-1 flex flex-col min-w-0 relative",style:{backgroundColor:"var(--bg-primary)"},children:[(0,r.jsx)("header",{className:"h-16 flex items-center justify-between px-8 border-b shrink-0 z-10",style:{borderColor:"var(--border-color)",backgroundColor:"var(--ui-panel)"},children:(0,r.jsxs)("div",{className:"flex-1 max-w-xl relative",children:[(0,r.jsxs)("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4",style:{color:"var(--text-secondary)"},viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:[(0,r.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,r.jsx)("path",{d:"m21 21-4.35-4.35"})]}),(0,r.jsx)("input",{type:"text",placeholder:"Rechercher des mods...",value:b,onChange:e=>y(e.target.value),className:"w-full rounded-full text-sm py-2.5 pl-10 pr-4 transition-all",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"2px solid var(--ui-border)",outline:"none"},onFocus:e=>{e.currentTarget.style.borderColor="#46C89B",e.currentTarget.style.boxShadow="0 0 0 3px rgba(70, 200, 155, 0.1)"},onBlur:e=>{e.currentTarget.style.borderColor="var(--ui-border)",e.currentTarget.style.boxShadow="none"}})]})}),(0,r.jsx)(J,{onSortChange:p,activeSort:f,onFilterChange:v,activeFilter:x,onCategoryChange:C,selectedCategory:w,viewMode:u,onViewModeChange:m}),(0,r.jsx)(R,{searchQuery:E,sortBy:f,category:w,viewMode:u})]})}):null:(0,r.jsx)("div",{className:"h-screen flex items-center justify-center",style:{background:"linear-gradient(to bottom right, #111827, var(--ui-dark), #111827)"},children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-6 max-w-md",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-center",style:{color:"var(--text-primary)"},children:"SimsForge"}),(0,r.jsx)("p",{className:"text-center",style:{color:"var(--text-secondary)"},children:"Mod manager for The Sims 4"}),(0,r.jsxs)("div",{className:"flex flex-col gap-3 w-full",children:[(0,r.jsx)("button",{onClick:()=>d.push("/auth/login"),className:"w-full px-6 py-3 rounded-md transition-colors font-medium text-white",style:{backgroundColor:"#46C89B",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.9"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:"Sign In"}),(0,r.jsx)("button",{onClick:l,className:"w-full px-6 py-3 rounded-md border transition-colors font-medium",style:{backgroundColor:"var(--ui-panel)",borderColor:"var(--border-color)",color:"var(--text-primary)",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--ui-hover)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--ui-panel)"},children:"Continue Without Login"})]})]})})}e.s(["default",()=>Q],52683)}]);